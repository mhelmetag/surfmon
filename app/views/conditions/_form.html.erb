<%= form.fields_for :conditions, condition, { child_index: index } do |condition_form| %>
  <div class="field is-grouped is-grouped-multiline" data-controller="conditions">
    <div class="control">
      <div class="select">
        <%= condition_form.select :source, sources_for_select, { value: 'conditions' }, { data: { action: 'change->conditions#changeSource' } } %>
      </div>
    </div>
    <div class="control">
      <div class="select">
        <%= condition_form.select :field, fields_for_select(condition_form.object.source || 'conditions'), { value: 'am_min_height' }, { data: { action: 'change->conditions#changeField' } } %>
      </div>
    </div>
    <div class="control">
      <div class="select">
        <%= condition_form.select :comparator, comparators_for_select %>
      </div>
    </div>
    <div class="control">
      <%= render partial: 'conditions/value', locals: { index: condition_form.index, source: condition_form.object.source || 'conditions', field: condition_form.object.field || 'am_min_height', value: condition_form.object.value } %>
    </div>
  </div>
<% end %>
